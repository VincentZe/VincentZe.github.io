!function(e){function t(t){for(var o,r,s=t[0],c=t[1],l=t[2],u=0,h=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&h.push(i[r][0]),i[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(d&&d(t);h.length;)h.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(o=!1)}o&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},i={2:0},a=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;a.push([1,1]),n()}([,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2);var i=document.getElementById("RA3");null!=i&&window.addEventListener("scroll",(function e(){var t=i.parentElement.parentElement.offsetTop-i.parentElement.parentElement.clientHeight;document.documentElement.scrollTop>t&&(new o.Application,window.removeEventListener("scroll",e))}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(3),a=n(4),r=n(5),s=n(6),c=function(){function e(){var e=this;this.UIs=[],this.models=[],this.meshRelationSheet={},this.modelAniRelationSheet={},this.SceneLoaded=[],this.scene=new o.Scene,this.Ra3div=document.getElementById("RA3"),this.camera=new o.PerspectiveCamera(60,this.Ra3div.clientWidth/this.Ra3div.clientHeight,.01,1e3),this.renderer=new o.WebGLRenderer({antialias:!0}),this.renderer.setSize(this.Ra3div.clientWidth,this.Ra3div.clientHeight),console.dir(this.Ra3div),this.gltfLoader=new a.GLTFLoader,this.animationMixer=new o.AnimationMixer(this.scene),this.clock=new o.Clock,this.Ra3div.appendChild(this.renderer.domElement),window.addEventListener("resize",(function(){return e.onWindowResize()})),this.setupScene(),this.loadModel("./assets/jumcv.glb","jumcv","_046",!0),this.loadModel("./assets/aumcv.glb","aumcv","bone_conyard_02",!0),this.loadModel("./assets/sumcv.glb","sumcv","piece_29",!0),this.loadModel("./assets/Giga-Fortress.glb","Giga-Fortress","POINTDEFENSEDRONEATTACH",!0);var t=this;this.playAnimationUnitlModelLoaded((function(){s.ModelControl.translateScene(t.models.find((function(e){return"aumcv"===e.scene.name})).scene,new o.Vector3(6,0,0)),s.ModelControl.translateScene(t.models.find((function(e){return"sumcv"===e.scene.name})).scene,new o.Vector3(-6,0,0)),s.ModelControl.translateScene(t.models.find((function(e){return"Giga-Fortress"===e.scene.name})).scene,new o.Vector3(0,.5,-12)),t.playModelAnimation("jumcv","JUMCV_TRANSAction",2202,!0,1,1),t.playModelAnimation("aumcv","AUMCV_TRANSFIXAction",2202,!0,1,1.5),t.playModelAnimation("sumcv","SUMCV_TRANSAction",2202,!0,1,1),t.playModelAnimation("Giga-Fortress","JUFORTRESSSHIP_TRANSAction",2202,!0,1,1)})),this.renderer.domElement.addEventListener("click",(function(t){var n=t.offsetX,i=t.offsetY,a=n/e.Ra3div.clientWidth*2-1,r=-i/e.Ra3div.clientHeight*2+1,s=new o.Vector2(a,r),c=new o.Raycaster;c.setFromCamera(s,e.camera);var l=c.intersectObjects(e.scene.children);l.length>0&&l.filter((function(e){return"floor"===e.object.name}))[0]})),this.render()}return e.prototype.newSphere=function(e){var t=new o.SphereGeometry(.2),n=new o.Mesh(t,new o.MeshBasicMaterial({color:16733525}));n.translateX(e.x),n.translateY(e.y),n.translateZ(e.z),this.scene.add(n)},e.prototype.loadModel=function(e,t,n,o){var i=this;void 0===n&&(n=void 0),void 0===o&&(o=!1),this.SceneLoaded.push(1);var a=this;this.gltfLoader.load(e,(function(e){i.sceneScale=e.scene.children[0].scale,i.scene.add(e.scene),e.scene.name=t,e.scene.children.forEach((function(e){a.setAllUnculling(e)})),i.models.push(e),i.meshRelationSheet[t]=n,i.modelAniRelationSheet[t]=e.animations,i.SceneLoaded.pop(),o?i.InitguiForMcv(e.scene):i.Initgui(e.scene)}))},e.prototype.setAllUnculling=function(e){var t=this;e.frustumCulled=!1,e.children.forEach((function(e){e.frustumCulled=!1,t.setAllUnculling(e)}))},e.prototype.playModelAnimation=function(e,t,n,o,i,a){void 0===n&&(n=2201),void 0===o&&(o=!0),void 0===i&&(i=1/0),void 0===a&&(a=1);var r=this.modelAniRelationSheet[e].find((function(e){return e.name===t}));this.action=this.animationMixer.clipAction(r),this.action.setEffectiveWeight(1),this.action.stop(),this.action.setLoop(n,i),this.action.timeScale=a,this.action.clampWhenFinished=o,this.action.play()},e.prototype.stopModelAnimation=function(e,t){var n=this.modelAniRelationSheet[e].find((function(e){return e.name===t}));this.action=this.animationMixer.clipAction(n),this.action.setEffectiveWeight(0),this.action.stop(),this.action.play()},e.prototype.pauseModelAnimation=function(e){var t=this;this.modelAniRelationSheet[e].forEach((function(e){t.action=t.animationMixer.clipAction(e),t.action.paused=!t.action.paused}))},e.prototype.findMeshInChildren=function(e,t){var n=this;try{if(0==e.children.length)return null;e.children.forEach((function(e){if(e.name==t)throw e;return n.findMeshInChildren(e,t)}))}catch(e){this.objTemp=e}return this.objTemp},e.prototype.interpolation=function(e,t,n){return void 0===n&&(n=10),Math.abs(e-t)<n?t:(e>t?e*=.8:e<t&&(e*=1.1),e)},e.prototype.playAnimationUnitlModelLoaded=function(e){var t=this;0==this.SceneLoaded.length?e():setTimeout((function(){t.playAnimationUnitlModelLoaded(e)}),50)},e.prototype.Initgui=function(e){var t=this,n=new r.GUI,o=n.addFolder("动作");n.name=e.name;var i={"显示模型":!0,"暂停":!1,"过程控制":1};this.modelAniRelationSheet[e.name].forEach((function(e){i[e.name]=!1})),this.UIs.push(n),n.closed=!0,n.add(i,"显示模型").onChange((function(t){s.ModelControl.setSceneVisbility(e,t)})),n.add(i,"暂停").onChange((function(n){t.pauseModelAnimation(e.name)})),this.modelAniRelationSheet[e.name].forEach((function(n){o.add(i,n.name).onChange((function(o){o?t.playModelAnimation(e.name,n.name,2201,!1,1/0,1):t.stopModelAnimation(e.name,n.name)}))})),n.add(i,"过程控制",0,1,.05)},e.prototype.InitguiForMcv=function(e){var t=new r.GUI,n=this;t.name=e.name;var i={"显示模型":!0,"展开":!0,"暂停":!1,"移动":!1,"过程控制":1};this.UIs.push(t),t.closed=!0,t.add(i,"显示模型").onChange((function(t){s.ModelControl.setSceneVisbility(e,t)})),t.add(i,"展开").onChange((function(o){o?n.playModelAnimation(e.name,n.modelAniRelationSheet[e.name][0].name,2202,!0,1,1):n.playModelAnimation(e.name,n.modelAniRelationSheet[e.name][0].name,2202,!1,1,-1),t.close()}));var a=n.models.find((function(e){return e.scene.name===t.name})).scene;t.add(i,"移动",0,1,.05).onChange((function(e){n.hideAllGuis(!0);var t=function(e){n.controls.enabled=!1;var t=e.offsetX,i=e.offsetY,r=t/window.innerWidth*2-1,c=-i/window.innerHeight*2+1,l=new o.Vector2(r,c),d=new o.Raycaster;d.setFromCamera(l,n.camera);var u=d.intersectObjects(n.scene.children),h=u.length>0?u.filter((function(e){return"floor"===e.object.name}))[0]:null;null!=h&&s.ModelControl.translateScene(a,h.point.sub(a.position))},r=function(e){var t,i;n.controls.enabled=!1,1==e.touches.length?(t=e.touches[0].pageX,i=e.touches[0].pageY):(t=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY));var r=t/window.innerWidth*2-1,c=-i/window.innerHeight*2+1,l=new o.Vector2(r,c),d=new o.Raycaster;d.setFromCamera(l,n.camera);var u=d.intersectObjects(n.scene.children),h=u.length>0?u.filter((function(e){return"floor"===e.object.name}))[0]:null;null!=h&&s.ModelControl.translateScene(a,h.point.sub(a.position))},c=function(){n.renderer.domElement.addEventListener("touchmove",r),n.renderer.domElement.addEventListener("touchend",d)},l=function e(){n.renderer.domElement.removeEventListener("mousemove",t),n.renderer.domElement.removeEventListener("click",d),n.renderer.domElement.removeEventListener("rightclik",e),n.controls.enabled=!0,n.hideAllGuis(!1),i.移动=!0},d=function e(){n.renderer.domElement.removeEventListener("touchmove",r),n.renderer.domElement.removeEventListener("touchstart",c),n.renderer.domElement.removeEventListener("touchend",e),n.controls.enabled=!0,n.hideAllGuis(!1),i.移动=!0};n.renderer.domElement.addEventListener("touchstart",c),n.renderer.domElement.addEventListener("mousemove",t),n.renderer.domElement.addEventListener("click",l),n.renderer.domElement.addEventListener("rightclick",l)})),t.add(i,"过程控制",0,1,.05)},e.prototype.hideAllGuis=function(e){e?this.UIs.forEach((function(e){e.hide()})):this.UIs.forEach((function(e){e.show()}))},e.prototype.renderGui=function(){var e=this;this.UIs.forEach((function(t){new o.Mesh;var n=e.MeshPosition(e.models.find((function(e){return e.scene.name===t.name})).scene,e.meshRelationSheet[t.name]);void 0===e.meshRelationSheet[t.name]&&(n.y+=2);var i=e.Coords3DTo2D(n,e.camera);i.x-=t.width/2,i.y-=t.domElement.scrollHeight,t.domElement.style.zIndex=Math.floor(10*e.Distance3DPoints(e.camera.position,n)).toString(),i.x-t.width>6e4?t.hide():(t.show(),t.closed?t.width=e.interpolation(t.width,25):t.width=e.interpolation(t.width,245),e.updateUiPosition(t,i))}))},e.prototype.isThisVisable=function(e){e.x},e.prototype.closeAllUIs=function(e){for(var t=0;t<this.UIs.length;t++){var n=this.UIs[t];n.name!==e&&n.close()}},e.prototype.labelIsInScreen=function(e,t){if(t.x+e.width>this.Ra3div.clientWidth)return!1},e.prototype.Distance3DPoints=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2))},e.prototype.MeshPosition=function(e,t){if(this.scene.updateMatrixWorld(!0),null!=t){var n=(e=this.findMeshInChildren(e,t)).getWorldPosition(new o.Vector3);try{var i=e.children.find((function(e){return e.name===t}));i.geometry.computeBoundingBox(),n.y+=i.geometry.boundingBox.max.z*this.sceneScale.z}catch(e){}return n}return e.getWorldPosition(new o.Vector3)},e.getAbsolutePosition=function(e){var t={left:0,top:0};do{t.top+=e.offsetTop,t.left+=e.offsetLeft,e=e.offsetParent}while(e);return t},e.prototype.Coords3DTo2D=function(e,t){var n=e.project(t),i=this.Ra3div.clientWidth/2,a=this.Ra3div.clientHeight/2,r=this.Ra3div.parentElement.parentElement,s=r.offsetTop-r.clientHeight;return new o.Vector2(Math.round(n.x*i+i)+document.getElementById("3dbox").offsetLeft,Math.round(-n.y*a+a)+s-document.documentElement.scrollTop+r.clientHeight+this.Ra3div.offsetTop+this.Ra3div.parentElement.offsetTop)},e.prototype.updateUiPosition=function(e,t){var n=e.domElement.style;"absolute"!=n.position&&(n.position="absolute"),n.left=t.x+"px",n.top=t.y+"px",e.updateDisplay()},e.prototype.translateScene=function(e,t){e.translateX(t.x),e.translateY(t.y),e.translateZ(t.z)},e.prototype.setupScene=function(){var e=new o.TextureLoader,t=[new o.MeshBasicMaterial({map:e.load("./assets/skybox/rt.jpg"),side:o.BackSide}),new o.MeshBasicMaterial({map:e.load("./assets/skybox/lf.jpg"),side:o.BackSide}),new o.MeshBasicMaterial({map:e.load("./assets/skybox/up.jpg"),side:o.BackSide}),new o.MeshBasicMaterial({map:e.load("./assets/skybox/dn.jpg"),side:o.BackSide}),new o.MeshBasicMaterial({map:e.load("./assets/skybox/bk.jpg"),side:o.BackSide}),new o.MeshBasicMaterial({map:e.load("./assets/skybox/ft.jpg"),side:o.BackSide})],n=new o.BoxGeometry(100,100,100),a=new o.Mesh(n,t);a.name="skybox";var r=new o.PlaneBufferGeometry(100,100),s=new o.Mesh(r,new o.MeshBasicMaterial({color:16777215}));s.name="floor",s.rotation.x=-Math.PI/2,this.floor=s,this.camera.position.set(-2,8,-2),this.scene.add(a),this.scene.add(s),this.scene.add(new o.GridHelper(100,100)),this.scene.add(new o.AmbientLight(16777215,2)),this.controls=new i.OrbitControls(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.04,this.controls.screenSpacePanning=!1,this.controls.minDistance=0,this.controls.maxDistance=20,this.controls.maxPolarAngle=Math.PI/2-.1},e.prototype.isClickedSolider=function(e){return"solider"===e.name?e:e.parent?this.isClickedSolider(e.parent):null},e.prototype.render=function(){var e=this;window.requestAnimationFrame((function(){return e.render()}));this.scene.getObjectByName("box");this.controls.update(),this.animationMixer.update(this.clock.getDelta()),this.renderer.render(this.scene,this.camera),0==this.SceneLoaded.length&&this.renderGui()},e.prototype.onWindowResize=function(){this.renderer.setSize(this.Ra3div.clientWidth,this.Ra3div.clientHeight),this.camera.aspect=this.Ra3div.clientWidth/this.Ra3div.clientHeight,this.camera.updateProjectionMatrix()},e}();t.Application=c},function(e,t,n){"use strict";var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(0));i.OrbitControls=function(e,t){var n,o,a,r,s;void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new i.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:i.MOUSE.ROTATE,MIDDLE:i.MOUSE.DOLLY,RIGHT:i.MOUSE.PAN},this.touches={ONE:i.TOUCH.ROTATE,TWO:i.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return f.phi},this.getAzimuthalAngle=function(){return f.theta},this.saveState=function(){c.target0.copy(c.target),c.position0.copy(c.object.position),c.zoom0=c.object.zoom},this.reset=function(){c.target.copy(c.target0),c.object.position.copy(c.position0),c.object.zoom=c.zoom0,c.object.updateProjectionMatrix(),c.dispatchEvent(l),c.update(),m=h.NONE},this.update=(n=new i.Vector3,o=(new i.Quaternion).setFromUnitVectors(e.up,new i.Vector3(0,1,0)),a=o.clone().inverse(),r=new i.Vector3,s=new i.Quaternion,function(){var e=c.object.position;return n.copy(e).sub(c.target),n.applyQuaternion(o),f.setFromVector3(n),c.autoRotate&&m===h.NONE&&j(2*Math.PI/60/60*c.autoRotateSpeed),c.enableDamping?(f.theta+=v.theta*c.dampingFactor,f.phi+=v.phi*c.dampingFactor):(f.theta+=v.theta,f.phi+=v.phi),f.theta=Math.max(c.minAzimuthAngle,Math.min(c.maxAzimuthAngle,f.theta)),f.phi=Math.max(c.minPolarAngle,Math.min(c.maxPolarAngle,f.phi)),f.makeSafe(),f.radius*=b,f.radius=Math.max(c.minDistance,Math.min(c.maxDistance,f.radius)),!0===c.enableDamping?c.target.addScaledVector(g,c.dampingFactor):c.target.add(g),n.setFromSpherical(f),n.applyQuaternion(a),e.copy(c.target).add(n),c.object.lookAt(c.target),!0===c.enableDamping?(v.theta*=1-c.dampingFactor,v.phi*=1-c.dampingFactor,g.multiplyScalar(1-c.dampingFactor)):(v.set(0,0,0),g.set(0,0,0)),b=1,!!(E||r.distanceToSquared(c.object.position)>p||8*(1-s.dot(c.object.quaternion))>p)&&(c.dispatchEvent(l),r.copy(c.object.position),s.copy(c.object.quaternion),E=!1,!0)}),this.dispose=function(){c.domElement.removeEventListener("contextmenu",ee,!1),c.domElement.removeEventListener("mousedown",G,!1),c.domElement.removeEventListener("wheel",K,!1),c.domElement.removeEventListener("touchstart",J,!1),c.domElement.removeEventListener("touchend",$,!1),c.domElement.removeEventListener("touchmove",Q,!1),document.removeEventListener("mousemove",W,!1),document.removeEventListener("mouseup",Z,!1),c.domElement.removeEventListener("keydown",q,!1)};var c=this,l={type:"change"},d={type:"start"},u={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},m=h.NONE,p=1e-6,f=new i.Spherical,v=new i.Spherical,b=1,g=new i.Vector3,E=!1,y=new i.Vector2,w=new i.Vector2,O=new i.Vector2,M=new i.Vector2,A=new i.Vector2,S=new i.Vector2,T=new i.Vector2,P=new i.Vector2,L=new i.Vector2;function R(){return Math.pow(.95,c.zoomSpeed)}function j(e){v.theta-=e}function C(e){v.phi-=e}var x,k=(x=new i.Vector3,function(e,t){x.setFromMatrixColumn(t,0),x.multiplyScalar(-e),g.add(x)}),N=function(){var e=new i.Vector3;return function(t,n){!0===c.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(c.object.up,e)),e.multiplyScalar(t),g.add(e)}}(),U=function(){var e=new i.Vector3;return function(t,n){var o=c.domElement;if(c.object.isPerspectiveCamera){var i=c.object.position;e.copy(i).sub(c.target);var a=e.length();a*=Math.tan(c.object.fov/2*Math.PI/180),k(2*t*a/o.clientHeight,c.object.matrix),N(2*n*a/o.clientHeight,c.object.matrix)}else c.object.isOrthographicCamera?(k(t*(c.object.right-c.object.left)/c.object.zoom/o.clientWidth,c.object.matrix),N(n*(c.object.top-c.object.bottom)/c.object.zoom/o.clientHeight,c.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),c.enablePan=!1)}}();function D(e){c.object.isPerspectiveCamera?b/=e:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom*e)),c.object.updateProjectionMatrix(),E=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function H(e){c.object.isPerspectiveCamera?b*=e:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom/e)),c.object.updateProjectionMatrix(),E=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function I(e){y.set(e.clientX,e.clientY)}function Y(e){M.set(e.clientX,e.clientY)}function _(e){if(1==e.touches.length)y.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(t,n)}}function V(e){if(1==e.touches.length)M.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);M.set(t,n)}}function z(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);T.set(0,o)}function F(e){if(1==e.touches.length)w.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(t,n)}O.subVectors(w,y).multiplyScalar(c.rotateSpeed);var o=c.domElement;j(2*Math.PI*O.x/o.clientHeight),C(2*Math.PI*O.y/o.clientHeight),y.copy(w)}function B(e){if(1==e.touches.length)A.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);A.set(t,n)}S.subVectors(A,M).multiplyScalar(c.panSpeed),U(S.x,S.y),M.copy(A)}function X(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);P.set(0,o),L.set(0,Math.pow(P.y/T.y,c.zoomSpeed)),D(L.y),T.copy(P)}function G(e){if(!1!==c.enabled){switch(e.preventDefault(),c.domElement.focus?c.domElement.focus():window.focus(),e.button){case 0:switch(c.mouseButtons.LEFT){case i.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===c.enablePan)return;Y(e),m=h.PAN}else{if(!1===c.enableRotate)return;I(e),m=h.ROTATE}break;case i.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===c.enableRotate)return;I(e),m=h.ROTATE}else{if(!1===c.enablePan)return;Y(e),m=h.PAN}break;default:m=h.NONE}break;case 1:switch(c.mouseButtons.MIDDLE){case i.MOUSE.DOLLY:if(!1===c.enableZoom)return;!function(e){T.set(e.clientX,e.clientY)}(e),m=h.DOLLY;break;default:m=h.NONE}break;case 2:switch(c.mouseButtons.RIGHT){case i.MOUSE.ROTATE:if(!1===c.enableRotate)return;I(e),m=h.ROTATE;break;case i.MOUSE.PAN:if(!1===c.enablePan)return;Y(e),m=h.PAN;break;default:m=h.NONE}}m!==h.NONE&&(document.addEventListener("mousemove",W,!1),document.addEventListener("mouseup",Z,!1),c.dispatchEvent(d))}}function W(e){if(!1!==c.enabled)switch(e.preventDefault(),m){case h.ROTATE:if(!1===c.enableRotate)return;!function(e){w.set(e.clientX,e.clientY),O.subVectors(w,y).multiplyScalar(c.rotateSpeed);var t=c.domElement;j(2*Math.PI*O.x/t.clientHeight),C(2*Math.PI*O.y/t.clientHeight),y.copy(w),c.update()}(e);break;case h.DOLLY:if(!1===c.enableZoom)return;!function(e){P.set(e.clientX,e.clientY),L.subVectors(P,T),L.y>0?D(R()):L.y<0&&H(R()),T.copy(P),c.update()}(e);break;case h.PAN:if(!1===c.enablePan)return;!function(e){A.set(e.clientX,e.clientY),S.subVectors(A,M).multiplyScalar(c.panSpeed),U(S.x,S.y),M.copy(A),c.update()}(e)}}function Z(e){!1!==c.enabled&&(document.removeEventListener("mousemove",W,!1),document.removeEventListener("mouseup",Z,!1),c.dispatchEvent(u),m=h.NONE)}function K(e){!1===c.enabled||!1===c.enableZoom||m!==h.NONE&&m!==h.ROTATE||(e.preventDefault(),e.stopPropagation(),c.dispatchEvent(d),function(e){e.deltaY<0?H(R()):e.deltaY>0&&D(R()),c.update()}(e),c.dispatchEvent(u))}function q(e){!1!==c.enabled&&!1!==c.enableKeys&&!1!==c.enablePan&&function(e){var t=!1;switch(e.keyCode){case c.keys.UP:U(0,c.keyPanSpeed),t=!0;break;case c.keys.BOTTOM:U(0,-c.keyPanSpeed),t=!0;break;case c.keys.LEFT:U(c.keyPanSpeed,0),t=!0;break;case c.keys.RIGHT:U(-c.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),c.update())}(e)}function J(e){if(!1!==c.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(c.touches.ONE){case i.TOUCH.ROTATE:if(!1===c.enableRotate)return;_(e),m=h.TOUCH_ROTATE;break;case i.TOUCH.PAN:if(!1===c.enablePan)return;V(e),m=h.TOUCH_PAN;break;default:m=h.NONE}break;case 2:switch(c.touches.TWO){case i.TOUCH.DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;!function(e){c.enableZoom&&z(e),c.enablePan&&V(e)}(e),m=h.TOUCH_DOLLY_PAN;break;case i.TOUCH.DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;!function(e){c.enableZoom&&z(e),c.enableRotate&&_(e)}(e),m=h.TOUCH_DOLLY_ROTATE;break;default:m=h.NONE}break;default:m=h.NONE}m!==h.NONE&&c.dispatchEvent(d)}}function Q(e){if(!1!==c.enabled)switch(e.preventDefault(),e.stopPropagation(),m){case h.TOUCH_ROTATE:if(!1===c.enableRotate)return;F(e),c.update();break;case h.TOUCH_PAN:if(!1===c.enablePan)return;B(e),c.update();break;case h.TOUCH_DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;!function(e){c.enableZoom&&X(e),c.enablePan&&B(e)}(e),c.update();break;case h.TOUCH_DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;!function(e){c.enableZoom&&X(e),c.enableRotate&&F(e)}(e),c.update();break;default:m=h.NONE}}function $(e){!1!==c.enabled&&(c.dispatchEvent(u),m=h.NONE)}function ee(e){!1!==c.enabled&&e.preventDefault()}c.domElement.addEventListener("contextmenu",ee,!1),c.domElement.addEventListener("mousedown",G,!1),c.domElement.addEventListener("wheel",K,!1),c.domElement.addEventListener("touchstart",J,!1),c.domElement.addEventListener("touchend",$,!1),c.domElement.addEventListener("touchmove",Q,!1),c.domElement.addEventListener("keydown",q,!1),-1===c.domElement.tabIndex&&(c.domElement.tabIndex=0),this.update()},i.OrbitControls.prototype=Object.create(i.EventDispatcher.prototype),i.OrbitControls.prototype.constructor=i.OrbitControls,i.MapControls=function(e,t){i.OrbitControls.call(this,e,t),this.mouseButtons.LEFT=i.MOUSE.PAN,this.mouseButtons.RIGHT=i.MOUSE.ROTATE,this.touches.ONE=i.TOUCH.PAN,this.touches.TWO=i.TOUCH.DOLLY_ROTATE},i.MapControls.prototype=Object.create(i.EventDispatcher.prototype),i.MapControls.prototype.constructor=i.MapControls,t.OrbitControls=i.OrbitControls},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=function(){function e(){}return e.setSceneVisbility=function(e,t){e.visible=t},e.translateScene=function(e,t){e.translateX(t.x),e.translateY(t.y),e.translateZ(t.z)},e.showSkeleton=function(e,t){var n=new o.SkeletonHelper(e);return n.visible=t,n.name=e.name+"SKL",n},e}();t.ModelControl=i}]);